<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_referral_code_list" model="ir.ui.view">
        <field name="name">pos.referral.code.list</field>
        <field name="model">pos.referral.code</field>
        <field name="arch" type="xml">
            <list string="Referral Codes">
                <field name="code"/>
                <field name="customer_id"/>
                <field name="phone_number"/>
                <field name="created_date"/>
                <field name="times_used"/>
                <field name="max_uses"/>
                <field name="is_active"/>
                <field name="pos_config_id"/>
            </list>
        </field>
    </record>

    <record id="view_referral_code_form" model="ir.ui.view">
        <field name="name">pos.referral.code.form</field>
        <field name="model">pos.referral.code</field>
        <field name="arch" type="xml">
            <form string="Referral Code">
                <sheet>
                    <group>
                        <group string="Basic Information">
                            <field name="code"/>
                            <field name="customer_id"/>
                            <field name="phone_number"/>
                            <field name="pos_config_id"/>
                            <field name="order_id"/>
                        </group>
                        <group string="Status &amp; Usage">
                            <field name="is_active"/>
                            <field name="created_date"/>
                            <field name="expiry_date"/>
                            <field name="max_uses"/>
                            <field name="times_used"/>
                            <field name="total_discount_given"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_referral_code_search" model="ir.ui.view">
        <field name="name">pos.referral.code.search</field>
        <field name="model">pos.referral.code</field>
        <field name="arch" type="xml">
            <search string="Search Referral Codes">
                <field name="code"/>
                <field name="customer_id"/>
                <field name="phone_number"/>
                <field name="pos_config_id"/>
                <filter name="active" string="Active" domain="[('is_active', '=', True)]"/>
                <filter name="expired" string="Expired" domain="[('expiry_date', '&lt;', context_today())]"/>
                <filter name="fully_used" string="Fully Used" domain="[('times_used', '&gt;=', 'max_uses')]"/>
                <filter name="available" string="Available" domain="[('is_active', '=', True), ('times_used', '&lt;', 'max_uses'), '|', ('expiry_date', '=', False), ('expiry_date', '&gt;', context_today())]"/>
                <group string="Group By">
                    <filter name="group_by_customer" string="Customer" context="{'group_by': 'customer_id'}"/>
                    <filter name="group_by_pos" string="POS Configuration" context="{'group_by': 'pos_config_id'}"/>
                    <filter name="group_by_status" string="Status" context="{'group_by': 'is_active'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action for referral codes -->
    <record id="action_pos_referral_codes" model="ir.actions.act_window">
        <field name="name">Referral Codes</field>
        <field name="res_model">pos.referral.code</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'search_default_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No referral codes found. Let's create one!
            </p>
            <p>
                Create referral codes for your customers to share with friends and family.
                Each code can be used a limited number of times and provides discounts to both the referrer and referred customer.
            </p>
        </field>
    </record>

</odoo>